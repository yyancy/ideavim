" ideavim's configurations

" basic settings
set number relativenumber
set encoding=utf-8
set clipboard+=unnamedplus
" Show a few lines of context around the cursor. Note that this makes the
" text scroll if you mouse-click near the start or end of the window.
set scrolloff=5
let mapleader=" "
" Do incremental searching.
set incsearch
set hlsearch
" Don't use Ex mode, use Q for formatting.
map Q gq

" idea specific settings
set idearefactormode=keep
set ideajoin
set ideajoin
set ideaput
set ideamarks

" basic mappings
nmap 0 _
vmap <C-c> y
vmap <C-v> p
imap <C-v> <esc>pa
map <S-C-v> p
noremap > >>
noremap < <<
vnoremap > >gv
vnoremap < <gv

map <leader><cr> :noh<cr>


" find and replace
map <leader>fa <Action>(FindInPath)

" navigation
map <C-o> <action>(Back)
map <C-i> <action>(Forward)

map gd <Action>(GotoDeclaration)zz
map gi <Action>(GotoImplementation)zz
map gy <Action>(GotoTypeDeclaration)
map gr <Action>(ShowUsages)
map gt <Action>(GotoSuperMethod)

map [g <Action>(GotoPreviousError)
map ]g <Action>(GotoNextError)
map [[g <Action>(VcsShowPrevChangeMarker)
map ]]g <Action>(VcsShowNextChangeMarker)
map gO <Action>(FileStructurePopup)

" refactor
map <leader>rn <Action>(RenameElement)
map <leader>rs <Action>(ChangeSignature)

" debug
" Map \r to the Reformat Code action
:map \r <Action>(ReformatCode)

" Map <leader>d to start debug
:map <leader>d <Action>(Debug)

" Map \b to toggle the breakpoint on the current line
:map \b <Action>(ToggleLineBreakpoint)
" actions
nmap <leader>h <action>(PreviousTab)
nmap <leader>l <action>(NextTab)
nmap <leader>bd <action>(CloseEditor)
nmap <leader>i <action>(Generate)
nmap <leader>m <action>(Git.Menu)
nmap <leader>s <action>(QuickChangeScheme)
nmap <leader>/ <action>(ShowErrorDescription)
nmap <leader>e <action>(GotoNextError)
nnoremap <leader><leader> <C-Tab>


# plugins 
# IdeaVimExtension
" set keep-english-in-normal 
" disable restoring input method according to the context
set keep-english-in-normal-and-restore-in-insert
let context_aware=0


# Plugins
Plug 'easymotion/vim-easymotion'
map f <Plug>(easymotion-bd-wl)
map F <Plug>(easymotion-bd-fl)


map t <Plug>(easymotion-bd-w)
map T <Plug>(easymotion-bd-f2)

Plug 'tpope/vim-surround'
Plug 'terryma/vim-multiple-cursors'
Plug 'vim-scripts/argtextobj.vim'
let g:argtextobj_pairs="(:),{:},<:>"

Plug 'tommcdo/vim-exchange'
Plug 'machakann/vim-highlightedyank'
Plug 'michaeljsmith/vim-indent-object'
Plug 'vim-matchit'

