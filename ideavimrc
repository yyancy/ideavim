" ideavim's configurations

" basic settings
set number relativenumber
set encoding=utf-8
set clipboard+=unnamedplus
" Show a few lines of context around the cursor. Note that this makes the
" text scroll if you mouse-click near the start or end of the window.
set scrolloff=5
let mapleader=" "
" Do incremental searching.
set incsearch
set hlsearch
set ignorecase
set smartcase
" set nowrapscan
" Don't use Ex mode, use Q for formatting.
map Q gq

" idea specific settings
set idearefactormode=keep
set ideajoin
set ideaput
set ideamarks

" basic mappings
nmap 0 _
vmap <C-c> y
vmap <C-v> p
imap <C-v> <esc>pa
map <S-C-v> p
noremap > >>
noremap < <<
vnoremap > >gv
vnoremap < <gv

map <leader><cr> :noh<cr>
map <leader>q <Action>(CloseContent)
map <leader><tab> <Action>(CloseAllToTheRight)
map <leader><S-tab> <Action>(CloseAllEditorsButActive)

map <c-h> <c-w><c-h>
map <c-j> <c-w><c-j>
map <c-k> <c-w><c-k>
map <c-l> <c-w><c-l>

imap <c-a> <c-o>_
imap <c-e> <end>
imap <c-f> <right>
imap <c-b> <left>
imap <a-f> <c-o>w
imap <a-b> <c-o>b

map <C-f> <action>(EmacsStyleIndent)
imap <C-f> <action>(EmacsStyleIndent)
imap <c-h> <Action>(EditorBackSpace)
imap <c-d> <del>
map i i<C-f>
" split windows
map <leader>- <Action>(SplitHorizontally)
map <leader>\| <Action>(SplitVertically)
imap <C-]> <c-o>f<right>

" find and replace
map <leader>ff <Action>(GotoFile)
map <leader>fa <Action>(FindInPath)
map <leader>fh <Action>(RecentFiles)
map <leader><c-f> <Action>(Find)

" navigation
map <C-o> <action>(Back)
map <C-i> <action>(Forward)

map gd <Action>(GotoDeclaration)zz
map gi <Action>(GotoImplementation)zz
map gy <Action>(GotoTypeDeclaration)zz
map gr <Action>(ShowUsages)zz
map gt <Action>(GotoSuperMethod)zz

map [g <Action>(GotoPreviousError)
map ]g <Action>(GotoNextError)
map [[g <Action>(VcsShowPrevChangeMarker)
map ]]g <Action>(VcsShowNextChangeMarker)
map gO <Action>(FileStructurePopup)

" refactor
map <leader>rn <Action>(RenameElement)
map <leader>rs <Action>(ChangeSignature)

" debug
" Map \r to the Reformat Code action
:map \r <Action>(ReformatCode)

" Map <leader>d to start debug
:map <leader>d <Action>(Debug)

" Map \b to toggle the breakpoint on the current line
:map \b <Action>(ToggleLineBreakpoint)
" actions
nmap <leader>h <action>(PreviousTab)
nmap <leader>l <action>(NextTab)
nmap <leader>bd <action>(CloseEditor)
nmap <leader>i <action>(Generate)
nmap <leader>m <action>(Git.Menu)
nmap <leader>s <action>(QuickChangeScheme)
nmap <leader>/ <action>(ShowErrorDescription)
nmap <leader>e <action>(GotoNextError)
nnoremap <leader><leader> <C-Tab>

# plugins 
# IdeaVimExtension
" set keep-english-in-normal 
" disable restoring input method according to the context
set keep-english-in-normal-and-restore-in-insert
let context_aware=0


# Plugins
Plug 'easymotion/vim-easymotion'
" map f <Plug>(easymotion-bd-fl)
" map F <Plug>(easymotion-lineforward)


map t <Plug>(easymotion-lineforward)
map T <Plug>(easymotion-linebackward)

Plug 'tpope/vim-surround'
Plug 'terryma/vim-multiple-cursors'
Plug 'vim-scripts/argtextobj.vim'
let g:argtextobj_pairs="(:),{:},<:>"

Plug 'tommcdo/vim-exchange'
Plug 'machakann/vim-highlightedyank'
Plug 'michaeljsmith/vim-indent-object'
Plug 'vim-matchit'
Plug 'vim-scripts/ReplaceWithRegister'

map s gr
map S grr
